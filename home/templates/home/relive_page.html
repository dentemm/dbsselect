{% extends 'base.html' %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}

  {% include 'home/partials/navbar_new.html' with page=page settings=settings %}

  <!-- Background video -->
  <div class="video-background-holder">
    <div class="video-background-overlay"></div>
      <video playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop">
        <source src="{{ page.video }}" type="video/mp4">
      </video>
    <div class="video-background-content container h-100">
      <div class="d-flex h-100 text-center align-items-center">
        {% comment %} <div class="w-100 text-white">
          <h1 class="display-4">Bootstrap video background</h1>
          <p class="lead mb-0">With HTML5 Video and Bootstrap 4</p>
          <p class="lead">Snippet by <a href="https://bootstrapious.com/snippets" class="text-white">
                      <u>Bootstrapious</u></a>
          </p>
        </div> {% endcomment %}
      </div>
    </div>
  </div>
  <!-- End -->

  <!-- info + image carousel -->
  <div class="container pt-5">
    <div class="row">
      <div class="col-lg-5 offset-lg-0 col-md-10 offset-md-1">
        <h2 class="text-primary font-weight-bold">{{ page.subtitle }}</h2>
        <h5>{{ page.info }}</p>
        <a href="{{ page.download_file.file.url }}" download="DBS Select" target="_blank" class="btn btn-primary btn-white-primary mt-5 mb-3">
          <b>{{ page.download_text|upper }}</b>
        </a>
      </div>
      <div class="col-lg-6 offset-lg-1 col-md-10 offset-md-1">
        <div id="carousel-gallery" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner mb-5">        
            {% for item in page.gallery.all %}
            {% image item.image fill-400x260 as tmp_img %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
              <img src="{{ tmp_img.file.url }}" class="d-block w-100" alt="...">
            </div>
            {% endfor %}
          </div>
          <a class="carousel-control-prev" href="#carousel-gallery" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carousel-gallery" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- sessions list -->
  <div class="container">
    <h2 class="text-primary font-weight-bold mt-5 mb-3 ml-3">{{ page.subtitle_publication }}</h2>
    <div class="owl-carousel owl-theme">

    {% for item in page.publications %}
      {% image item.image fill-300x300 as this_img %}
      <div class="card bg-primary text-white mx-3">
        <img src="{{ this_img.file.url }}" class="card-img img-fluid" alt="{{ this_img.file }}">
        <div class="card-img-overlay text-center img-darkened d-flex flex-column justify-content-between" style="background-color: rgba(black, 0.9);">
          <h3 class="card-title font-weight-bold">{{ item }}</h3>
          <a href="{{ item.link }}" target="_blank" class="btn btn-primary btn-white-primary mt-5 mb-3">
            <b>{{ page.read_more|upper }}</b>
          </a>
        </div>
      </div>
    {% endfor %}
    </div>
  </div>

  <section class="bg-secondary mt-5">
    {% include 'home/partials/footer_new.html' with settings=settings %}
  </section>

{% endblock content %}

{% block extra_js %}
  <script type="text/javascript">
  $(document).ready(function(){
    $('.owl-carousel').owlCarousel({
      items: 3,
      loop: true,
      autoplay: true,
      // nav: true,
      autoplayTimeout: 3500,
      responsive: {
        0: {
          items: 2
        },
        600: {
          items: 3,
        },
        950: {
          item: 3
        }
      }
    });
  });
  </script>
{% endblock %}